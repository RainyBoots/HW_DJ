{% extends "base.html" %}
{% load static %}
{% load markdown_to_html %}

{% block title %}{{ post.title }}{% endblock %}

{% block head %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.4.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="{% static 'css/post_detail.css' %}">
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="card">
        <div class="card-body">
            <h2 class="card-title">{% markdown_to_html post.title %}</h2>
            <p class="card-text"><strong>Автор:</strong> {{ post.author }}</p>
            <p class="card-text"><strong>Дата публикации:</strong> {{ post.published_date }}</p>
            <p class="card-text"><strong>Категория:</strong> <span><a href="{% url "category_detail" post.category.slug %}" class="cat-link">{{ post.category }}</a></span></p>
            <p class="card-text"><strong>Теги:</strong> 
                {% if post.tags.all %}
                    {% for tag in post.tags.all %}
                        <span class="tag badge"><a href="{% url "tag_detail" tag.slug %}" class="tag-link">{{ tag }}</a></span>
                    {% endfor %}
                {% endif %}
            </p>
            <p class="card-text">{% markdown_to_html post.text %}</p>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-2">
            <div>
                <span class="me-3 ms-3"><i class="bi bi-chat-dots"></i> {{ post.comments|length }}</span>
            </div>
            <div>
                <a href="{% url 'blog' %}" class="btn btn-dark d-block d-md-none me-3 ms-3">
                    <i class="bi bi-arrow-left"></i>
                </a>
                <a href="{% url 'blog' %}" class="btn btn-dark d-none d-md-block me-3 ms-3">
                    Назад к катологу
                </a>
            </div>
        </div>
    </div>
    
    <h3 class="mt-4">Комментарии:</h3>
    <div class="list-group">
        {% for comment in post.comments %}
            {% include "includes/comment_include.html" %}
        {% empty %}
            <p class="text-muted">Комментариев пока нет.</p>
        {% endfor %}
    </div>
</div>

{% endblock %}